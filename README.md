# 地図比較アプリ - オフセット調整機能付き

迅速測図と現代地図を左右に並べて比較できるWebアプリケーションです。位置の微調整機能、多彩なレイヤー選択、URLによる位置共有機能を備えています。

## � デモサイト

**[https://wata909.github.io/map_compare_offset/](https://wata909.github.io/map_compare_offset/)**

## �🌟 主な機能

### 地図比較表示
- **左側**: 迅速測図（位置調整可能）
- **右側**: 選択可能な各種地図レイヤー
- **同期表示**: 左右の地図が連動して移動・ズーム

### オフセット調整機能
- **微調整ボタン**: 上下左右への細かい位置調整
- **ステップサイズ変更**: 1px、5px、10px、50px から選択
- **キーボード操作**: 矢印キーによる直感的な調整
- **リセット機能**: オフセットを即座に0に戻す

### 豊富なレイヤー選択
**歴史地図**
- 関東平野迅速測図（1880年代）
- 東京図測量原図（1880年代）

**現代地図**
- 地理院タイル（標準）
- 地理院タイル（写真）

**国土画像情報**
- 1974-1978年
- 1979-1983年  
- 1984-1986年
- 1988-1990年

**空中写真**
- 1945-1950年
- 1961-1964年

### その他の機能
- **ヘアクロス表示**: 両方の地図中央に常時表示される十字線
- **URL位置共有**: 現在の表示位置をURLで保存・共有
- **ブラウザ履歴対応**: 戻る・進むボタンで位置履歴をナビゲート

## 🚀 使い方

### 基本操作
1. **地図の移動**: ドラッグまたはマウスホイールで操作
2. **ズーム**: マウスホイールまたは地図上のコントロール
3. **レイヤー切り替え**: 右側の「Base Layer」パネルから選択

### 位置調整
1. **ボタン操作**: 左下の微調整ボタンで迅速測図の位置を調整
2. **キーボード操作**:
   - `↑↓←→`: 位置調整
   - `R`: リセット
3. **ステップサイズ**: 移動量を1px〜50pxで調整

### 位置の保存・共有
- URLに位置情報が自動保存
- URLをブックマークして後で同じ位置を表示
- URLを共有して他の人と位置を共有

## 🛠 技術仕様

- **フロントエンド**: HTML, CSS, JavaScript
- **地図ライブラリ**: Leaflet.js
- **タイルソース**: 
  - 農研機構農業環境研究部門（歴史地図）
  - 国土地理院（現代地図・航空写真）

## 📍 URLハッシュ形式

```
#ズームレベル/緯度/経度
例: #14/35.680000/139.760000
```

## 🔧 開発者向け

### ファイル構成
```
map_compare_offset/
├── index.html    # メインアプリケーション
├── README.md     # このファイル
└── LICENSE       # ライセンス
```

### カスタマイズ
- タイルソースのURL変更
- オフセット調整のステップサイズ追加
- 新しいレイヤーの追加

## 📄 ライセンス

このプロジェクトはThe Unlicenseの下で公開されています。  
詳細は [LICENSE](https://github.com/wata909/map_compare_offset/blob/main/LICENSE) ファイルをご覧ください。

## 🙏 データ提供

- **歴史的農業環境閲覧システム**: 農研機構農業環境研究部門
- **地理院タイル**: 国土地理院
